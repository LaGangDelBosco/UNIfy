<!DOCTYPE html>
<html lang="it">
<head>
	<meta charset="utf-8" />
	
	<title> Home - UNIfy </title>
	<meta name = "description" content = "TODO " />
	<!-- component keywords: DEVONO ESSERE TUTTE DIVERSE PER PAGINA: RAGIONARE COME CREARE IL COMPONENT, PER QUALI PAGINE FARLO E SE FARLO -->
	<meta name="author" content="Leonardo Frigo, Nicholas Moretto, Raul Seganfreddo, Giacomo Toso" />
	
	
	<link rel="stylesheet" href="./style.css" />
	<link rel="stylesheet" href="./mini.css" media="screen and (max-width:600px), only screen and (max-device-width:600px)" />
	<link rel="stylesheet" href="./print.css" media="print"/>

	<link href='https://fonts.googleapis.com/css?family=Comfortaa' rel='stylesheet'>
	<link rel="shortcut icon" type="image/png" href="./img/unify_icon.png" media="screen" /> <!--icona visibile su browser-->
	
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<script src="./js/menu.js"></script>
	<script src="./js/menu_mobile.js"></script>
</head>

<body>	
    <div id="container">
        <component>header</component>

        <nav class="breadcrumb">      
			<p>Ti trovi in: <span lang="en">Home</span></p>
		</nav>

        <main>
			<h1>Benvenuti su UNIfy</h1> <!-- da mettere?? -->

			<!--SE UTENTE NON LOGGATO, REINDIRIZZARE AD ACCEDI?-->

			<!-- da qui partono i 3 blocchi di contenuto -->
			<div class="content">
				<!-- nota: i 3 blocchi andrebbero messi uno a fianco all'altro, ma aspetto qualche guru del front-end per farlo -->
				<nav id="menu">
					<component>menu</component>
				</nav>
				
				<nav id="post-box">
					<div id="text-box">
						<form method="post" action="index.php">
							<p><textarea id="text" name="text" rows="4" cols="50" placeholder="Scrivi qualcosa..."></textarea>
							o <button id="add_media" type="button">Aggiungi immagine</button> </p> <!--trovare il modo per aggiungere l'immagine, magari con il testo, e poi pubblicare-->
							<button class="loginbtn" id="public-post" type="submit" name="submit-public-post">Pubblica</button>
						</form>
					</div>
					
					<div id="post">
						<component>lista_post</component>
					</div>
					<script>
						document.addEventListener('DOMContentLoaded', function() {
							document.querySelectorAll('.like-interact').forEach(button => {
								button.addEventListener('click', function() {
									const postId = this.getAttribute('data-post-id');

									const xhr = new XMLHttpRequest();
									xhr.open('POST', 'like-post.php', true);
									xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
									xhr.onload = function () {
										if (xhr.status === 200) {
											const response = JSON.parse(xhr.responseText);
											if (response.success) {
												const likeCountSpan = button.nextElementSibling;
												likeCountSpan.textContent = response.likes_number;
											} else {
												alert('Errore: ' + response.message);
											}
										}
									};
									xhr.send('post_id=' + postId);
								});
							});
						});
					</script>

				</nav>
					
					
				<nav id="extra-section">
                    <div id="search-bar">
                        <input type="text" id="search" placeholder="Cerca...">
                        <button type="button" onclick="searchFunction()">Cerca</button> <!-- da implementare -->
                    </div>
                    <!-- potrebbe interessarti -->
                </nav>
			<!-- fine dei 3 blocchi di contenuto -->
			</div>

			<br>
			<hr><h2>Contatti</h2>
			<h2 class="social">Seguici sui social: <a href="https://it-it.facebook.com/"> <img src="./img/facebook.svg" alt="Icona di Facebook"></a> <a href="https://www.instagram.com/"> <img src="./img/instagram.svg" alt="Icona di Instagram"></a></h2>

			<component>goback</component>
		</main>
	</div>
    <component>footer</component>

</body>
</html>